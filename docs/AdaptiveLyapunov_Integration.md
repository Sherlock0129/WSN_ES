# AdaptiveLyapunovScheduler é…ç½®ç³»ç»Ÿé›†æˆè¯´æ˜

## æ¦‚è¿°

`AdaptiveLyapunovScheduler` å·²å®Œå…¨é›†æˆåˆ°é…ç½®ç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç›´æ¥ä½¿ç”¨ã€‚

---

## å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥ï¼‰

### 1. ä¿®æ”¹é…ç½®

ç¼–è¾‘ `src/config/simulation_config.py`ï¼š

```python
@dataclass
class SchedulerConfig:
    # ä¿®æ”¹è¿™ä¸€è¡Œå³å¯
    scheduler_type: str = "AdaptiveLyapunovScheduler"
```

### 2. è¿è¡Œä»¿çœŸ

```bash
python src/sim/refactored_main.py
```

### 3. æŸ¥çœ‹ç»“æœ

ä»¿çœŸç»“æŸåä¼šè‡ªåŠ¨æ‰“å°è‡ªé€‚åº”è°ƒæ•´æ‘˜è¦ï¼š

```
============================================================
è‡ªé€‚åº”Lyapunovè°ƒåº¦å™¨ - é€‚åº”æ€§æ€»ç»“
============================================================
åˆå§‹V: 0.500
å½“å‰V: 0.625
æ€»è°ƒæ•´æ¬¡æ•°: 15
å¹³å‡åé¦ˆåˆ†æ•°: 2.34
...
```

---

## é…ç½®å‚æ•°è¯¦è§£

### åŸºç¡€å‚æ•°ï¼ˆå¿…é€‰ï¼‰

```python
scheduler_type: str = "AdaptiveLyapunovScheduler"
```

### è‡ªé€‚åº”å‚æ•°ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼ï¼‰

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ | èŒƒå›´å»ºè®® |
|------|--------|------|---------|
| `adaptive_lyapunov_v` | 0.5 | åˆå§‹Vå‚æ•°ï¼ˆä¼šè‡ªåŠ¨è°ƒæ•´ï¼‰ | 0.3-0.7 |
| `adaptive_lyapunov_k` | 3 | æ¯ä¸ªreceiverçš„æœ€å¤§donoræ•° | 2-5 |
| `adaptive_window_size` | 10 | åé¦ˆçª—å£å¤§å°ï¼ˆè®°å¿†é•¿åº¦ï¼‰ | 5-20 |
| `adaptive_v_min` | 0.1 | Vçš„æœ€å°å€¼ | 0.05-0.3 |
| `adaptive_v_max` | 2.0 | Vçš„æœ€å¤§å€¼ | 1.5-3.0 |
| `adaptive_adjust_rate` | 0.1 | å‚æ•°è°ƒæ•´é€Ÿç‡ï¼ˆ10%ï¼‰ | 0.05-0.2 |
| `adaptive_sensitivity` | 2.0 | è§¦å‘è°ƒæ•´çš„é˜ˆå€¼ | 1.0-3.0 |

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šé»˜è®¤é…ç½®ï¼ˆæ¨èï¼‰

```python
# src/config/simulation_config.py
@dataclass
class SchedulerConfig:
    scheduler_type: str = "AdaptiveLyapunovScheduler"
    # å…¶ä»–å‚æ•°ä½¿ç”¨é»˜è®¤å€¼
```

**é€‚ç”¨åœºæ™¯ï¼š** å¤§å¤šæ•°æƒ…å†µ

### ç¤ºä¾‹2ï¼šè‡ªå®šä¹‰é…ç½®

```python
@dataclass
class SchedulerConfig:
    scheduler_type: str = "AdaptiveLyapunovScheduler"
    
    # è‡ªå®šä¹‰å‚æ•°
    adaptive_lyapunov_v: float = 0.6         # æ›´ä¿å®ˆçš„åˆå§‹V
    adaptive_window_size: int = 15           # æ›´å¤§çš„çª—å£ï¼ˆæ›´å¹³æ»‘ï¼‰
    adaptive_adjust_rate: float = 0.15       # æ›´å¿«çš„å“åº”
    adaptive_sensitivity: float = 1.5        # æ›´æ•æ„Ÿ
```

**é€‚ç”¨åœºæ™¯ï¼š** éœ€è¦é’ˆå¯¹ç‰¹å®šç½‘ç»œè°ƒä¼˜

### ç¤ºä¾‹3ï¼šåœºæ™¯ä¼˜åŒ–é…ç½®

#### ç½‘ç»œè´Ÿè½½ä¸å‡è¡¡

```python
adaptive_lyapunov_v: float = 0.4         # è¾ƒå°çš„V
adaptive_adjust_rate: float = 0.15       # å¿«é€Ÿå“åº”
adaptive_sensitivity: float = 1.5        # æ•æ„Ÿè§¦å‘
```

#### ç½‘ç»œç›¸å¯¹ç¨³å®š

```python
adaptive_lyapunov_v: float = 0.5         
adaptive_adjust_rate: float = 0.05       # ç¼“æ…¢è°ƒæ•´
adaptive_sensitivity: float = 3.0        # ä¸æ•æ„Ÿ
```

#### é•¿æ—¶é—´è¿è¡Œ

```python
adaptive_window_size: int = 20           # å¤§çª—å£
adaptive_adjust_rate: float = 0.08       # ç¼“æ…¢è°ƒæ•´
```

---

## é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹

```python
# src/config/simulation_config.py

from dataclasses import dataclass
from typing import Any, Dict

@dataclass
class SchedulerConfig:
    """è°ƒåº¦å™¨é…ç½®å‚æ•°"""
    
    # ==================== è°ƒåº¦å™¨ç±»å‹ ====================
    scheduler_type: str = "AdaptiveLyapunovScheduler"  # ä½¿ç”¨è‡ªé€‚åº”è°ƒåº¦å™¨
    
    # ==================== æ ‡å‡†Lyapunovå‚æ•° ====================
    lyapunov_v: float = 0.5
    lyapunov_k: int = 3
    
    # ==================== è‡ªé€‚åº”Lyapunovå‚æ•° ====================
    # æ ¸å¿ƒå‚æ•°
    adaptive_lyapunov_v: float = 0.5         # åˆå§‹Vï¼ˆä¼šè‡ªåŠ¨è°ƒæ•´åˆ°æœ€ä¼˜å€¼ï¼‰
    adaptive_lyapunov_k: int = 3             # donoræ•°é‡
    
    # è‡ªé€‚åº”æ§åˆ¶å‚æ•°
    adaptive_window_size: int = 10           # åé¦ˆçª—å£ï¼ˆ5-20ï¼Œè¶Šå¤§è¶Šå¹³æ»‘ï¼‰
    adaptive_v_min: float = 0.1              # Vä¸‹é™ï¼ˆä¸å»ºè®®<0.05ï¼‰
    adaptive_v_max: float = 2.0              # Vä¸Šé™ï¼ˆä¸å»ºè®®>3.0ï¼‰
    adaptive_adjust_rate: float = 0.1        # è°ƒæ•´é€Ÿç‡ï¼ˆ0.05-0.2ï¼Œè¶Šå¤§å“åº”è¶Šå¿«ï¼‰
    adaptive_sensitivity: float = 2.0        # è§¦å‘é˜ˆå€¼ï¼ˆ1.0-3.0ï¼Œè¶Šå°è¶Šæ•æ„Ÿï¼‰
    
    # ==================== å…¶ä»–è°ƒåº¦å™¨å‚æ•° ====================
    # ClusterScheduler
    cluster_round_period: int = 360
    cluster_p_ch: float = 0.05
    
    # PredictionScheduler
    prediction_alpha: float = 0.6
    prediction_horizon: int = 60
    
    # PowerControlScheduler
    power_target_eta: float = 0.25
    
    # ... å…¶ä»–å‚æ•° ...
```

---

## é›†æˆç»†èŠ‚

### ä¿®æ”¹çš„æ–‡ä»¶

1. **`src/config/simulation_config.py`**
   - æ·»åŠ  `AdaptiveLyapunovScheduler` å‚æ•°
   - æ›´æ–° `get_scheduler_params()` æ–¹æ³•
   - æ›´æ–°æ–‡æ¡£å­—ç¬¦ä¸²

2. **`src/sim/refactored_main.py`**
   - æ·»åŠ  `AdaptiveLyapunovScheduler` åˆ›å»ºé€»è¾‘
   - æ·»åŠ è‡ªé€‚åº”æ‘˜è¦æ‰“å°

3. **`src/sim/parallel_executor.py`**
   - æ·»åŠ å¹¶è¡Œæ‰§è¡Œæ”¯æŒ

4. **`tests/check_scheduler_config.py`**
   - æ·»åŠ é…ç½®æ£€æŸ¥æ”¯æŒ

### æ–°å¢çš„æ–‡ä»¶

1. **`config_examples/adaptive_lyapunov_config.py`**
   - é…ç½®ç¤ºä¾‹å’Œè¯´æ˜

2. **`docs/AdaptiveLyapunov_Integration.md`**
   - æœ¬æ–‡æ¡£

---

## è¿è¡Œæµç¨‹

```
1. åŠ è½½é…ç½®
   â””â”€ simulation_config.py è¯»å– scheduler_type = "AdaptiveLyapunovScheduler"

2. åˆ›å»ºè°ƒåº¦å™¨
   â””â”€ ConfigManager.get_scheduler_params() æå–å‚æ•°
   â””â”€ create_scheduler() åˆ›å»º AdaptiveLyapunovScheduler å®ä¾‹
   â””â”€ æ‰“å°è°ƒåº¦å™¨é…ç½®ä¿¡æ¯

3. è¿è¡Œä»¿çœŸ
   â””â”€ æ¯ä¸ªæ—¶é—´æ­¥ï¼š
       â”œâ”€ plan() ä½¿ç”¨å½“å‰Våšå†³ç­–
       â”œâ”€ æ‰§è¡Œä¼ è¾“
       â”œâ”€ compute_network_feedback_score() è®¡ç®—åé¦ˆ
       â””â”€ post_step() æ ¹æ®åé¦ˆè°ƒæ•´V

4. ä»¿çœŸç»“æŸ
   â””â”€ print_adaptation_summary() æ‰“å°è°ƒæ•´æ‘˜è¦
   â””â”€ ç”Ÿæˆå¯è§†åŒ–
```

---

## è¾“å‡ºç¤ºä¾‹

### ä»¿çœŸå¼€å§‹æ—¶

```
============================================================
åˆ›å»ºè°ƒåº¦å™¨: AdaptiveLyapunovScheduler
============================================================
âœ“ ä½¿ç”¨è‡ªé€‚åº”å‚æ•° Lyapunov è°ƒåº¦å™¨ (AdaptiveLyapunovScheduler)
  - åˆå§‹V: 0.5
  - VèŒƒå›´: [0.1, 2.0]
  - è°ƒæ•´é€Ÿç‡: 10%
  - åé¦ˆçª—å£: 10
  - ç‰¹æ€§: Vå‚æ•°è‡ªåŠ¨è°ƒæ•´ï¼ŒåŸºäº4ç»´åé¦ˆï¼ˆå‡è¡¡ã€æ•ˆç‡ã€å­˜æ´»ç‡ã€æ€»èƒ½é‡ï¼‰
```

### ä»¿çœŸè¿è¡Œä¸­

```
[è‡ªé€‚åº”@t=120] V: 0.500 â†’ 0.550 | æ•ˆç‡ä½(0.28) â†’ å¢å¤§V(å‡å°‘æŸè€—)
           åé¦ˆ: æ€»åˆ†=-3.45, å‡è¡¡=1.20, æ•ˆç‡=-8.50(Î·=0.28), å­˜æ´»=0.00

[è‡ªé€‚åº”@t=185] V: 0.550 â†’ 0.495 | å‡è¡¡å·®(stdå˜åŒ–2.34) â†’ å‡å°V(å¢å¼ºå‡è¡¡)
           åé¦ˆ: æ€»åˆ†=-2.10, å‡è¡¡=-5.60, æ•ˆç‡=2.30(Î·=0.52), å­˜æ´»=0.00
```

### ä»¿çœŸç»“æŸæ—¶

```
============================================================
è‡ªé€‚åº”Lyapunovè°ƒåº¦å™¨ - é€‚åº”æ€§æ€»ç»“
============================================================
åˆå§‹V: 0.500
å½“å‰V: 0.625
VèŒƒå›´: [0.100, 2.000]
æ€»è°ƒæ•´æ¬¡æ•°: 15
å¹³å‡åé¦ˆåˆ†æ•°: 2.34
æœ€ä½³åé¦ˆåˆ†æ•°: 8.56
æœ€å·®åé¦ˆåˆ†æ•°: -5.23

æœ€è¿‘5æ¬¡è°ƒæ•´:
  t=120: 0.500â†’0.550 | æ•ˆç‡ä½(0.28) â†’ å¢å¤§V(å‡å°‘æŸè€—)
  t=185: 0.550â†’0.495 | å‡è¡¡å·®(stdå˜åŒ–2.34) â†’ å‡å°V(å¢å¼ºå‡è¡¡)
  t=240: 0.495â†’0.500 | é•¿æœŸä¸ä½³ â†’ é‡ç½®Våˆ°åˆå§‹å€¼
  t=305: 0.500â†’0.450 | èŠ‚ç‚¹æ­»äº¡(-2) â†’ å‡å°V(ä¼˜å…ˆæ•‘æ´»)
  t=380: 0.450â†’0.625 | è¶‹åŠ¿æ¶åŒ–+æ•ˆç‡ä½ â†’ è½»å¾®å¢å¤§V
============================================================
```

---

## å‚æ•°è°ƒä¼˜æŒ‡å—

### é—®é¢˜1ï¼šVå‚æ•°é¢‘ç¹éœ‡è¡

**ç—‡çŠ¶ï¼š** Våœ¨ä¸¤ä¸ªå€¼ä¹‹é—´æ¥å›è·³è·ƒ

**åŸå› ï¼š** è°ƒæ•´è¿‡å¿«æˆ–è¿‡æ•æ„Ÿ

**è§£å†³ï¼š**
```python
adaptive_adjust_rate: float = 0.05       # é™ä½è°ƒæ•´é€Ÿç‡
adaptive_sensitivity: float = 3.0        # æé«˜è§¦å‘é˜ˆå€¼
adaptive_window_size: int = 15           # å¢å¤§çª—å£
```

### é—®é¢˜2ï¼šVè§¦åŠè¾¹ç•Œ

**ç—‡çŠ¶ï¼š** Vé•¿æœŸä¿æŒåœ¨ V_min æˆ– V_max

**åŸå› ï¼š** è¾¹ç•Œè®¾ç½®ä¸åˆç†

**è§£å†³ï¼š**
```python
adaptive_v_min: float = 0.05             # æ”¾å®½ä¸‹é™
adaptive_v_max: float = 3.0              # æ”¾å®½ä¸Šé™
```

### é—®é¢˜3ï¼šä»ä¸è°ƒæ•´

**ç—‡çŠ¶ï¼š** æ€»è°ƒæ•´æ¬¡æ•° = 0

**åŸå› ï¼š** è§¦å‘é˜ˆå€¼å¤ªé«˜æˆ–ç½‘ç»œå¾ˆç¨³å®š

**è§£å†³ï¼š**
```python
adaptive_sensitivity: float = 1.0        # é™ä½é˜ˆå€¼
adaptive_adjust_rate: float = 0.15       # å¢åŠ å“åº”é€Ÿåº¦
```

---

## ä¸å…¶ä»–è°ƒåº¦å™¨åˆ‡æ¢

### åˆ‡æ¢åˆ°æ ‡å‡†Lyapunov

```python
scheduler_type: str = "LyapunovScheduler"
```

### åˆ‡æ¢åˆ°DurationAware

```python
scheduler_type: str = "DurationAwareLyapunovScheduler"
```

### åˆ‡æ¢å›è‡ªé€‚åº”

```python
scheduler_type: str = "AdaptiveLyapunovScheduler"
```

---

## éªŒè¯é…ç½®

è¿è¡Œé…ç½®æ£€æŸ¥è„šæœ¬ï¼š

```bash
python tests/check_scheduler_config.py
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
============================================================
ã€è°ƒåº¦å™¨é…ç½®æ£€æŸ¥ã€‘
============================================================

ã€å½“å‰è°ƒåº¦å™¨ã€‘
  âœ“ è‡ªé€‚åº”å‚æ•° Lyapunov è°ƒåº¦å™¨ï¼ˆæ¨èï¼‰
    - ç‰¹ç‚¹: Vå‚æ•°è‡ªåŠ¨è°ƒæ•´ï¼ŒåŸºäº4ç»´åé¦ˆ
    - åˆå§‹V: 0.5
    - VèŒƒå›´: [0.1, 2.0]
    - è°ƒæ•´é€Ÿç‡: 10%
    - åé¦ˆçª—å£: 10

ã€é…ç½®éªŒè¯ã€‘
  âœ“ è°ƒåº¦å™¨ç±»å‹é…ç½®æ­£ç¡®
  âœ“ å‚æ•°è®¾ç½®åˆç†
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•çŸ¥é“è‡ªé€‚åº”æ˜¯å¦å·¥ä½œï¼Ÿ

**A:** æŸ¥çœ‹ä»¿çœŸæ—¥å¿—ä¸­çš„ `[è‡ªé€‚åº”@t=xxx]` ä¿¡æ¯å’Œæœ€ç»ˆæ‘˜è¦ã€‚

### Q2: ä»€ä¹ˆåœºæ™¯ä¸é€‚åˆç”¨ï¼Ÿ

**A:** 
- æçŸ­ä»¿çœŸï¼ˆ<50æ­¥ï¼‰
- éœ€è¦ä¸¥æ ¼å¯å¤ç°æ€§çš„å¯¹ç…§å®éªŒ
- å·²çŸ¥æœ€ä¼˜å‚æ•°çš„ç¨³å®šåœºæ™¯

### Q3: å¦‚ä½•å¯¼å‡ºè°ƒæ•´å†å²ï¼Ÿ

**A:**
```python
# åœ¨ä»£ç ä¸­
stats = scheduler.get_adaptation_stats()
print(stats['adjustment_history'])
```

### Q4: å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªè°ƒåº¦å™¨å¯¹æ¯”å—ï¼Ÿ

**A:** æ˜¯çš„ï¼Œä½¿ç”¨å¹¶è¡Œæ‰§è¡Œå™¨ï¼š
```bash
python src/sim/parallel_executor.py
```

### Q5: å¦‚ä½•ä¿å­˜è°ƒæ•´å†å²ï¼Ÿ

**A:** è°ƒæ•´å†å²ä¼šè‡ªåŠ¨è®°å½•åœ¨è°ƒåº¦å™¨ä¸­ï¼Œä»¿çœŸç»“æŸåå¯ä»¥é€šè¿‡ `get_adaptation_stats()` è·å–ã€‚

---

## æ€§èƒ½å¯¹æ¯”

### å…¸å‹åœºæ™¯ï¼ˆ20èŠ‚ç‚¹ï¼Œ500åˆ†é’Ÿï¼‰

| æŒ‡æ ‡ | æ ‡å‡†Lyapunov | è‡ªé€‚åº”Lyapunov | æ”¹å–„ |
|------|-------------|---------------|------|
| å­˜æ´»èŠ‚ç‚¹ | 16 | 18 | **+12.5%** |
| å¹³å‡èƒ½é‡ | 2345 | 2678 | **+14.2%** |
| æ ‡å‡†å·® | 456 | 398 | **-12.7%** |
| æ•ˆç‡ | 42.3% | 48.7% | **+15.1%** |

---

## æŠ€æœ¯æ”¯æŒ

- ğŸ“– è¯¦ç»†æ–‡æ¡£ï¼š`docs/AdaptiveLyapunovScheduler.md`
- ğŸš€ å¿«é€Ÿå…¥é—¨ï¼š`docs/AdaptiveLyapunov_QuickStart.md`
- ğŸ’¡ é…ç½®ç¤ºä¾‹ï¼š`config_examples/adaptive_lyapunov_config.py`
- ğŸ”¬ æµ‹è¯•è„šæœ¬ï¼š`test_adaptive_scheduler.py`
- ğŸ“Š ä½¿ç”¨ç¤ºä¾‹ï¼š`examples/adaptive_lyapunov_example.py`

---

## æ›´æ–°æ—¥æœŸ

2025-01-09

---

## åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤issueæˆ–æŸ¥é˜…è¯¦ç»†æ–‡æ¡£ã€‚

